{"remainingRequest":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/addRmas/AddRmas.vue?vue&type=style&index=0&id=0d6f9f59&lang=stylus&scoped=true&","dependencies":[{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/addRmas/AddRmas.vue","mtime":1542702416414},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js","mtime":1539243342312},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \"~styles/varibles.styl\"\n.addRmas\n    background: #ffffff\n    height: 100%\n    width: 100%\n    position: fixed\n    .content\n        overflow: hidden\n        position: absolute\n        top: .8rem\n        left: 0\n        bottom: 0\n        right: 0\n        .submitBtn\n            margin-top: .62rem\n            width: 70%\n            margin-left: 15%\n            line-height: .8rem\n            color: #ffffff\n            font-size: .3rem\n            border-radius: .04rem\n            background: $mainColor\n",{"version":3,"sources":["AddRmas.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddRmas.vue","sourceRoot":"src/pages/addRmas","sourcesContent":["<template>\n    <div class=\"addRmas\">\n        <add-nav\n                @goBackToDetail=\"goBackToDetail\"\n        ></add-nav>\n        <div class=\"content\" ref=\"content\">\n            <div>\n                <add-info\n                        :clickSubmit=\"clickSubmit\"\n                        @showDialog=\"showDialog\"\n                        @infoOK=\"infoOK\"\n                ></add-info>\n                <add-photo\n                        :beginUp=\"infoIsOK\"\n                        :caseSubId=\"oneCase.caseSubId\"\n                        @photoUpFinish=\"photoUpFinish\"\n                        @photoUpErr=\"photoUpErr\"\n                ></add-photo>\n                <add-video\n                        :beginUp=\"photoUpIsOver\"\n                        :caseSubId=\"oneCase.caseSubId\"\n                        @videoUpFinish=\"videoUpFinish\"\n                        @videoUpErr=\"videoUpErr\"\n                ></add-video>\n                <add-audio\n                        :beginUp=\"videoUpIsOver\"\n                        :caseSubId=\"oneCase.caseSubId\"\n                        @audioUpFinish=\"audioUpFinish\"\n                        @audioUpErr=\"audioUpErr\"\n                ></add-audio>\n                <div class=\"submitBtn\" @click=\"submitClick\">提交记录</div>\n            </div>\n        </div>\n        <dialog-bar\n                :show=\"isShowDialog\"\n                :content=\"DialogContent\"\n                @cancel=\"cancel\"\n        ></dialog-bar>\n        <loading :isShowLoading=\"clickSubmit\"></loading>\n    </div>\n</template>\n\n<script>\nimport AddNav from \"./component/AddNav\";\nimport AddInfo from \"./component/AddInfo\";\nimport AddPhoto from \"./component/AddPhoto\";\nimport AddVideo from \"./component/AddVideo\";\nimport AddAudio from \"./component/AddAudio\";\nimport DialogBar from \"../comment/DialogBar\";\nimport Loading from \"../comment/Loading\";\nimport Bscroll from \"better-scroll\";\nimport { Decrypt, Encrypt } from \"../../utils\";\nexport default {\n  name: \"AddRmas\",\n  data() {\n    return {\n      clickSubmit: false,\n      infoIsOK: false,\n      photoUpIsOver: false,\n      videoUpIsOver: false,\n      audioUpIsOver: false,\n      info: {},\n      photoUrls: [],\n      videoUrls: [],\n      audioUrls: [],\n      oneCase: {},\n      myAddress: \"定位失败\",\n      isShowDialog: false,\n      DialogContent: \"\",\n      goToLogin: false\n    };\n  },\n  components: {\n    AddNav,\n    AddInfo,\n    AddPhoto,\n    AddVideo,\n    AddAudio,\n    DialogBar,\n    Loading\n  },\n  methods: {\n    goBackToDetail() {\n      this.$router.back(-1);\n    },\n    submitClick() {\n      this.clickSubmit = true;\n    },\n    cancel() {\n      this.clickSubmit = false;\n      this.isShowDialog = false;\n      if (this.goToLogin) {\n        let len = history.length;\n        this.$router.go(-(len - 1));\n      }\n    },\n    showDialog(content) {\n      this.DialogContent = content;\n      this.isShowDialog = true;\n    },\n    infoOK(info) {\n      console.log(\"内容全部填写\", info);\n      this.info = info;\n      this.infoIsOK = true;\n    },\n    photoUpFinish(imgUrls) {\n      console.log(\"图片上传完成\" + imgUrls);\n      this.photoUpIsOver = true;\n      this.photoUrls = imgUrls;\n    },\n    photoUpErr() {\n      this.clickSubmit = false;\n      this.DialogContent = \"图片上传失败\";\n      this.isShowDialog = true;\n    },\n    videoUpFinish(videoUrls) {\n      console.log(\"视频上传完成\" + videoUrls);\n      this.videoUpIsOver = true;\n      this.videoUrls = videoUrls;\n    },\n    videoUpErr() {\n      this.clickSubmit = false;\n      this.DialogContent = \"视频上传失败\";\n      this.isShowDialog = true;\n    },\n    audioUpFinish(audioUrls) {\n      console.log(\"音频上传完成\" + audioUrls);\n      this.audioUpIsOver = true;\n      this.audioUrls = audioUrls;\n      this.submit();\n    },\n    audioUpErr() {\n      this.clickSubmit = false;\n      this.DialogContent = \"音频上传失败\";\n      this.isShowDialog = true;\n    },\n    submit() {\n      //上传催记\n      this.goToLogin = false;\n      let self = this;\n      var photoList = \"\";\n      for (let i = 0; i < this.photoUrls.length; i++) {\n        if (i == 0) {\n          photoList = photoList + this.photoUrls[i];\n        } else {\n          photoList = photoList + \",\" + this.photoUrls[i];\n        }\n      }\n\n      var videoList = \"\";\n      for (let i = 0; i < this.videoUrls.length; i++) {\n        if (i == 0) {\n          videoList = videoList + this.videoUrls[i];\n        } else {\n          videoList = videoList + \",\" + this.videoUrls[i];\n        }\n      }\n\n      var audioList = \"\";\n      for (let i = 0; i < this.audioUrls.length; i++) {\n        if (i == 0) {\n          audioList = audioList + this.audioUrls[i];\n        } else {\n          audioList = audioList + \",\" + this.audioUrls[i];\n        }\n      }\n\n      self.info[\"photoList\"] = photoList;\n      self.info[\"videoList\"] = videoList;\n      self.info[\"audioList\"] = audioList;\n      self.info[\"caseSubId\"] = self.oneCase.caseSubId;\n      self.info[\"address\"] = self.myAddress;\n      let params = JSON.stringify(self.info);\n      console.log(\"add info =\" + params);\n      let encrypt = Encrypt(params);\n\n      self\n        .$axios({\n          method: \"POST\",\n          url: \"/api/ace-app/collection/addCollection\",\n          data: {\n            params: encrypt,\n            userId: localStorage.userId,\n            token: localStorage.token\n          }\n        })\n        .then(function(response) {\n          console.log(response);\n          self.clickSubmit = false;\n          let data = response.data;\n          let mydata = data.data;\n          if (mydata == \"Success\") {\n            self.$router.go(-1);\n          } else if (mydata.code == \"duplicateLogin\") {\n            self.DialogContent = \"用户已在另一设备上登录，请在此设备上重新登录\";\n            self.isShowDialog = true;\n            self.goToLogin = true;\n          } else {\n            self.clickSubmit = false;\n            self.DialogContent = \"提交失败，请重试\";\n            self.isShowDialog = true;\n          }\n        })\n        .catch(function(error) {\n          console.log(error);\n          self.clickSubmit = false;\n          self.DialogContent = \"系统繁忙，请稍等\";\n          self.isShowDialog = true;\n        });\n    }\n  },\n  mounted() {\n    let self = this;\n    this.oneCase = this.$route.params.mycase;\n    console.log(this.oneCase);\n    this.scroll = new Bscroll(this.$refs.content);\n    //定位\n    plus.geolocation.getCurrentPosition(\n      function(position) {\n        let lat = position.coords.latitude; //纬度\n        let long = position.coords.longitude; //经度\n        let country = position.address.country; //国家\n        let province = position.address.province; //省\n        let city = position.address.city; //市\n        let district = position.address.district; //区\n        let street = position.address.street; //街\n        let streetNum = position.address.streetNum; //街道号\n        self.myAddress =\n          country + province + city + district + street + streetNum;\n        if (self.myAddress.length == 0) {\n          self.myAddress = \"定位失败\";\n        }\n      },\n      function(error) {\n        self.myAddress = \"定位出错\";\n        console.log(\"定位出错：\" + error.message);\n      },\n      {}\n    );\n  }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n    @import \"~styles/varibles.styl\"\n    .addRmas\n        background: #ffffff\n        height: 100%\n        width: 100%\n        position: fixed\n        .content\n            overflow: hidden\n            position: absolute\n            top: .8rem\n            left: 0\n            bottom: 0\n            right: 0\n            .submitBtn\n                margin-top: .62rem\n                width: 70%\n                margin-left: 15%\n                line-height: .8rem\n                color: #ffffff\n                font-size: .3rem\n                border-radius: .04rem\n                background: $mainColor\n</style>\n"]}]}