{"remainingRequest":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/addRmas/component/AddVideo.vue?vue&type=style&index=0&id=3f9ae411&lang=stylus&scoped=true&","dependencies":[{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/addRmas/component/AddVideo.vue","mtime":1542272186982},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js","mtime":1539243342312},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \"~styles/varibles.styl\"\n.videoDiv\n    margin-top: .2rem\n    text-align: left\n    margin-left: .4rem\n    padding-bottom: .2rem\n    .video-Tip\n        font-size: .28rem\n        color: $font-color\n        display: block\n        text-align: left\n    .upload_warp\n        overflow: hidden\n        .upload_warp_img\n            float: left\n            .upload_warp_img_div\n                display: inline-block\n                position: relative\n                width: 1.44rem\n                height: 1.44rem\n                .upload_warp_img_div_del\n                    position: absolute\n                    left: 1.04rem\n                    width: .4rem\n                    height: .4rem\n                    z-index: 2\n                .upload_warp_img_div_img\n                    position: absolute\n                    top: .2rem\n                    width: 1.24rem\n                    height: 1.24rem\n                    background-color #000\n        .videos\n            .video\n                width: 1.24rem\n                height: 1.24rem\n                padding-top: .2rem\n                padding-right: .4rem\n\n",{"version":3,"sources":["AddVideo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddVideo.vue","sourceRoot":"src/pages/addRmas/component","sourcesContent":["<template>\n    <div class=\"videoDiv border-bottom\">\n        <label class=\"photo-Tip\">催收视频：</label>\n        <div class=\"upload_warp\">\n            <div class=\"upload_warp_img\" v-show=\"showVideo\">\n                <div class=\"upload_warp_img_div\"\n                     v-for=\"(item,index) in videoList\"\n                     :key=\"index\"\n                >\n                    <img src=\"~imgUrl/del.png\" class=\"upload_warp_img_div_del\" @click=\"fileDel(index)\">\n                    <video\n                            :src=\"item\"\n                            preload=\"auto\"\n                            controls=\"controls\"\n                            class=\"upload_warp_img_div_img\"\n                    >\n                    </video>\n                </div>\n            </div>\n            <div class=\"videos\">\n                <img class=\"video\" src=\"~imgUrl/add@2x.png\" @click.stop=\"fileClick()\"/>\n                <input\n                        type=\"file\"\n                        multiple\n                        ref=\"uploadImage\"\n                        @change=\"fileChange($event)\"\n                        accept=\"video/*\"\n                        name=\"file\"\n                        style=\"display: none\"\n                        id=\"upload_file_video\"\n                />\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: \"AddVideo\",\n  data() {\n    return {\n      videoList: [],\n      videoFiles: [],\n      videoUrls: [],\n      upErr: false\n    };\n  },\n  props: {\n    beginUp: Boolean,\n    caseSubId: String\n  },\n  watch: {\n    beginUp(newVal) {\n      if (newVal === true) {\n        let self = this;\n        self.upErr = false;\n        if (this.videoFiles.length > 0) {\n          var succNum = 0;\n          console.log(\"开始上传视频\");\n          for (let i = 0; i < this.videoFiles.length; i++) {\n            if (self.upErr) break;\n            let file = this.videoFiles[i];\n            let param = new FormData();\n            param.append(\"file\", file, file.name);\n            let config = { headers: { \"Content-Type\": \"multipart/form-data\" } };\n            let url =\n              \"api/ace-app/collectionVideo/videoAdd?caseSubId=\" +\n              self.caseSubId;\n            this.$axios\n              .post(url, param, config)\n              .then(response => {\n                let mydata = response.data;\n                if (mydata.message == \"上传成功\") {\n                  succNum++;\n                  //保存返回的URL\n                  let url = mydata.data;\n                  self.videoUrls.push(url);\n                  if (succNum == this.videoFiles.length) {\n                    //视频上传完\n                    self.$emit(\"videoUpFinish\", self.videoUrls);\n                  }\n                } else {\n                  self.upErr = true;\n                  self.$emit(\"videoUpErr\");\n                }\n              })\n              .catch(error => {\n                console.log(error);\n                self.upErr = true;\n                self.$emit(\"videoUpErr\");\n              });\n          }\n        } else {\n          self.$emit(\"videoUpFinish\", self.videoUrls);\n        }\n      }\n    }\n  },\n  methods: {\n    fileClick() {\n      console.log(\"点击了添加\");\n      let imgSel = document.getElementById(\"upload_file_video\");\n      console.log(imgSel);\n      const event = new MouseEvent(\"click\");\n      imgSel.dispatchEvent(event);\n    },\n\n    fileDel(index) {\n      let self = this;\n      self.videoList.splice(index, 1);\n    },\n    fileChange(el) {\n      let self = this;\n      for (let i = 0; i < el.target.files.length; i++) {\n        let file = el.target.files[i];\n        console.log(file);\n        var url = self.getFileURL(file);\n        self.videoList.push(url);\n        self.videoFiles.push(file);\n      }\n    },\n    getFileURL(file) {\n      var getUrl = null;\n      if (window.createObjectURL != undefined) {\n        getUrl = window.createObjectURL(file);\n      } else if (window.URL != undefined) {\n        getUrl = window.URL.createObjectURL(file);\n      } else if (window.webkitURL != undefined) {\n        getUrl = window.webkitURL.createObjectURL(file);\n      }\n      return getUrl;\n    }\n    // //摄像\n    // getVideo() {\n    //   let self = this;\n    //   var cmr = plus.camera.getCamera();\n    //   var res = cmr.supportedVideoResolutions[0];\n    //   var fmt = cmr.supportedVideoFormats[0];\n    //   cmr.startVideoCapture(\n    //     function(path) {\n    //       plus.io.resolveLocalFileSystemURL(\n    //         path,\n    //         function(entry) {\n    //           console.log(entry.toLocalURL() + \" name=\" + entry.name);\n    //           self.videoList.push(entry.toLocalURL());\n    //         },\n    //         function(e) {\n    //           console.log(\"读取拍照文件错误\" + e.message);\n    //           plus.nativeUI.toast(\"读取拍照文件错误：\" + e.message);\n    //         }\n    //       );\n    //     },\n    //     function(error) {\n    //       console.log(\"拍摄失败\" + error.message);\n    //     },\n    //     { resolution: res, format: fmt }\n    //   );\n    // },\n    // //从相册选\n    // galleryVideo() {\n    //   let self = this;\n    //   plus.gallery.pick(\n    //     function(event) {\n    //       console.log(\"选择视频成功\");\n    //       for (var i in event.files) {\n    //         console.log(event.files[i]);\n    //         self.videoList.push(event.files[i]);\n    //       }\n    //     },\n    //     function(error) {\n    //       console.log(\"选择视频失败\" + error.message);\n    //     },\n    //     {\n    //       filter: \"video\",\n    //       multiple: true,\n    //       system: true\n    //     }\n    //   );\n    // },\n    // showActionSheet() {\n    //   let self = this;\n    //   let bts = [\n    //     {\n    //       title: \"摄像\"\n    //     },\n    //     {\n    //       title: \"从相册选择\"\n    //     }\n    //   ];\n    //   plus.nativeUI.actionSheet(\n    //     {\n    //       cancel: \"取消\",\n    //       buttons: bts\n    //     },\n    //     function(e) {\n    //       if (e.index == 1) {\n    //         self.getVideo();\n    //       } else if (e.index == 2) {\n    //         self.galleryVideo();\n    //       }\n    //     }\n    //   );\n    // },\n  },\n  computed: {\n    showVideo() {\n      return this.videoList.length > 0;\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n    @import \"~styles/varibles.styl\"\n    .videoDiv\n        margin-top: .2rem\n        text-align: left\n        margin-left: .4rem\n        padding-bottom: .2rem\n        .video-Tip\n            font-size: .28rem\n            color: $font-color\n            display: block\n            text-align: left\n        .upload_warp\n            overflow: hidden\n            .upload_warp_img\n                float: left\n                .upload_warp_img_div\n                    display: inline-block\n                    position: relative\n                    width: 1.44rem\n                    height: 1.44rem\n                    .upload_warp_img_div_del\n                        position: absolute\n                        left: 1.04rem\n                        width: .4rem\n                        height: .4rem\n                        z-index: 2\n                    .upload_warp_img_div_img\n                        position: absolute\n                        top: .2rem\n                        width: 1.24rem\n                        height: 1.24rem\n                        background-color #000\n            .videos\n                .video\n                    width: 1.24rem\n                    height: 1.24rem\n                    padding-top: .2rem\n                    padding-right: .4rem\n\n</style>\n"]}]}