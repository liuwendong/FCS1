{"remainingRequest":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/caseDetail/component/RmasAudio.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/caseDetail/component/RmasAudio.vue","mtime":1542767737701},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js","mtime":1539243342312},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Decrypt, Encrypt } from \"../../../utils\";\nimport photoUrl from \"../../../../static/xiazai.png\";\nexport default {\n  name: \"RmasAudio\",\n  data() {\n    return {\n      urls: [],\n      audioNames: [],\n      audioLoaclUrls: [],\n      downloadBtn: photoUrl\n    };\n  },\n  props: {\n    item: Object\n  },\n  beforeMount() {\n    if (this.item.audioList.length > 0) {\n      this.urls = this.item.audioList.split(\",\");\n      console.log(\"音频路径----- \" + this.urls);\n      for (let i = 0; i < this.urls.length; i++) {\n        let oneUrl = this.urls[i];\n        let names = oneUrl.split(\"/\");\n        let name = names[names.length - 1];\n        this.audioNames.push(name);\n      }\n    }\n  },\n  methods: {\n    downloadAudio(index) {\n      this.$emit(\"downloading\");\n      let videoUrl = this.urls[index];\n      let param = { url: videoUrl };\n      console.log(\"开始下载录音 url= \" + param);\n      let encrypt = Encrypt(JSON.stringify(param));\n      let self = this;\n      let url =\n        \"api/ace-app/fileDownload/download?\" +\n        \"parm=\" +\n        encodeURIComponent(encrypt);\n      console.log(\"下载路径 url=\" + url);\n      self\n        .$axios({\n          method: \"GET\",\n          url: url,\n          responseType: \"arraybuffer\"\n        })\n        .then(res => {\n          let blob = new Blob([res.data], {\n            type:\n              \"application/vnd.openxmlformates-officedocument.spreadsheetml.sheet\"\n          });\n          self.urls.splice(index, 1);\n          self.audioLoaclUrls.push(URL.createObjectURL(blob));\n          self.$emit(\"downloaded\");\n        })\n        .catch(error => {\n          console.log(error);\n          self.$emit(\"downloadErr\", \"视频下载失败\");\n        });\n    }\n  }\n};\n",null]}