{"remainingRequest":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/thread-loader/dist/cjs.js!/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/addRmas/AddRmas.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/addRmas/AddRmas.vue","mtime":1542702416414},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js","mtime":1539243342312},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js","mtime":1539243342312},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AddNav from \"./component/AddNav\";\nimport AddInfo from \"./component/AddInfo\";\nimport AddPhoto from \"./component/AddPhoto\";\nimport AddVideo from \"./component/AddVideo\";\nimport AddAudio from \"./component/AddAudio\";\nimport DialogBar from \"../comment/DialogBar\";\nimport Loading from \"../comment/Loading\";\nimport Bscroll from \"better-scroll\";\nimport { Decrypt, Encrypt } from \"../../utils\";\nexport default {\n  name: \"AddRmas\",\n  data: function data() {\n    return {\n      clickSubmit: false,\n      infoIsOK: false,\n      photoUpIsOver: false,\n      videoUpIsOver: false,\n      audioUpIsOver: false,\n      info: {},\n      photoUrls: [],\n      videoUrls: [],\n      audioUrls: [],\n      oneCase: {},\n      myAddress: \"定位失败\",\n      isShowDialog: false,\n      DialogContent: \"\",\n      goToLogin: false\n    };\n  },\n  components: {\n    AddNav: AddNav,\n    AddInfo: AddInfo,\n    AddPhoto: AddPhoto,\n    AddVideo: AddVideo,\n    AddAudio: AddAudio,\n    DialogBar: DialogBar,\n    Loading: Loading\n  },\n  methods: {\n    goBackToDetail: function goBackToDetail() {\n      this.$router.back(-1);\n    },\n    submitClick: function submitClick() {\n      this.clickSubmit = true;\n    },\n    cancel: function cancel() {\n      this.clickSubmit = false;\n      this.isShowDialog = false;\n\n      if (this.goToLogin) {\n        var len = history.length;\n        this.$router.go(-(len - 1));\n      }\n    },\n    showDialog: function showDialog(content) {\n      this.DialogContent = content;\n      this.isShowDialog = true;\n    },\n    infoOK: function infoOK(info) {\n      console.log(\"内容全部填写\", info);\n      this.info = info;\n      this.infoIsOK = true;\n    },\n    photoUpFinish: function photoUpFinish(imgUrls) {\n      console.log(\"图片上传完成\" + imgUrls);\n      this.photoUpIsOver = true;\n      this.photoUrls = imgUrls;\n    },\n    photoUpErr: function photoUpErr() {\n      this.clickSubmit = false;\n      this.DialogContent = \"图片上传失败\";\n      this.isShowDialog = true;\n    },\n    videoUpFinish: function videoUpFinish(videoUrls) {\n      console.log(\"视频上传完成\" + videoUrls);\n      this.videoUpIsOver = true;\n      this.videoUrls = videoUrls;\n    },\n    videoUpErr: function videoUpErr() {\n      this.clickSubmit = false;\n      this.DialogContent = \"视频上传失败\";\n      this.isShowDialog = true;\n    },\n    audioUpFinish: function audioUpFinish(audioUrls) {\n      console.log(\"音频上传完成\" + audioUrls);\n      this.audioUpIsOver = true;\n      this.audioUrls = audioUrls;\n      this.submit();\n    },\n    audioUpErr: function audioUpErr() {\n      this.clickSubmit = false;\n      this.DialogContent = \"音频上传失败\";\n      this.isShowDialog = true;\n    },\n    submit: function submit() {\n      //上传催记\n      this.goToLogin = false;\n      var self = this;\n      var photoList = \"\";\n\n      for (var i = 0; i < this.photoUrls.length; i++) {\n        if (i == 0) {\n          photoList = photoList + this.photoUrls[i];\n        } else {\n          photoList = photoList + \",\" + this.photoUrls[i];\n        }\n      }\n\n      var videoList = \"\";\n\n      for (var _i = 0; _i < this.videoUrls.length; _i++) {\n        if (_i == 0) {\n          videoList = videoList + this.videoUrls[_i];\n        } else {\n          videoList = videoList + \",\" + this.videoUrls[_i];\n        }\n      }\n\n      var audioList = \"\";\n\n      for (var _i2 = 0; _i2 < this.audioUrls.length; _i2++) {\n        if (_i2 == 0) {\n          audioList = audioList + this.audioUrls[_i2];\n        } else {\n          audioList = audioList + \",\" + this.audioUrls[_i2];\n        }\n      }\n\n      self.info[\"photoList\"] = photoList;\n      self.info[\"videoList\"] = videoList;\n      self.info[\"audioList\"] = audioList;\n      self.info[\"caseSubId\"] = self.oneCase.caseSubId;\n      self.info[\"address\"] = self.myAddress;\n      var params = JSON.stringify(self.info);\n      console.log(\"add info =\" + params);\n      var encrypt = Encrypt(params);\n      self.$axios({\n        method: \"POST\",\n        url: \"/api/ace-app/collection/addCollection\",\n        data: {\n          params: encrypt,\n          userId: localStorage.userId,\n          token: localStorage.token\n        }\n      }).then(function (response) {\n        console.log(response);\n        self.clickSubmit = false;\n        var data = response.data;\n        var mydata = data.data;\n\n        if (mydata == \"Success\") {\n          self.$router.go(-1);\n        } else if (mydata.code == \"duplicateLogin\") {\n          self.DialogContent = \"用户已在另一设备上登录，请在此设备上重新登录\";\n          self.isShowDialog = true;\n          self.goToLogin = true;\n        } else {\n          self.clickSubmit = false;\n          self.DialogContent = \"提交失败，请重试\";\n          self.isShowDialog = true;\n        }\n      }).catch(function (error) {\n        console.log(error);\n        self.clickSubmit = false;\n        self.DialogContent = \"系统繁忙，请稍等\";\n        self.isShowDialog = true;\n      });\n    }\n  },\n  mounted: function mounted() {\n    var self = this;\n    this.oneCase = this.$route.params.mycase;\n    console.log(this.oneCase);\n    this.scroll = new Bscroll(this.$refs.content); //定位\n\n    plus.geolocation.getCurrentPosition(function (position) {\n      var lat = position.coords.latitude; //纬度\n\n      var long = position.coords.longitude; //经度\n\n      var country = position.address.country; //国家\n\n      var province = position.address.province; //省\n\n      var city = position.address.city; //市\n\n      var district = position.address.district; //区\n\n      var street = position.address.street; //街\n\n      var streetNum = position.address.streetNum; //街道号\n\n      self.myAddress = country + province + city + district + street + streetNum;\n\n      if (self.myAddress.length == 0) {\n        self.myAddress = \"定位失败\";\n      }\n    }, function (error) {\n      self.myAddress = \"定位出错\";\n      console.log(\"定位出错：\" + error.message);\n    }, {});\n  }\n};",null]}