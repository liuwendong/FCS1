{"remainingRequest":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/addRmas/component/AddPhoto.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/addRmas/component/AddPhoto.vue","mtime":1542697303739},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js","mtime":1539243342312},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js","mtime":1539243342312},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"addPhoto\",\n  data: function data() {\n    return {\n      imgList: [],\n      imgFiles: [],\n      imgUrls: [],\n      upErr: false\n    };\n  },\n  props: {\n    beginUp: Boolean,\n    caseSubId: String\n  },\n  watch: {\n    beginUp: function beginUp(newVal) {\n      var _this = this;\n\n      if (newVal === true) {\n        var succNum;\n\n        (function () {\n          //开始上传图片\n          var self = _this;\n          self.upErr = false;\n\n          if (_this.imgFiles.length > 0) {\n            console.log(\"开始上传图片\");\n            succNum = 0;\n\n            for (var i = 0; i < self.imgFiles.length; i++) {\n              if (self.upErr) break;\n              var file = self.imgFiles[i];\n              var param = new FormData();\n              param.append(\"file\", file, file.name);\n              var config = {\n                headers: {\n                  \"Content-Type\": \"multipart/form-data\"\n                }\n              };\n              var url = \"api/ace-app/collectionPhoto/imageAdd?caseSubId=\" + self.caseSubId;\n              self.$axios.post(url, param, config).then(function (response) {\n                console.log(response);\n                var mydata = response.data;\n\n                if (mydata.message == \"上传成功\") {\n                  succNum++; //保存返回的URL\n\n                  var _url = mydata.data;\n                  self.imgUrls.push(_url);\n\n                  if (succNum == _this.imgFiles.length) {\n                    //图片上传完\n                    self.$emit(\"photoUpFinish\", self.imgUrls);\n                  }\n                } else {\n                  self.upErr = true;\n                  self.$emit(\"photoUpErr\");\n                }\n              }).catch(function (error) {\n                console.log(error);\n                self.upErr = true;\n                self.$emit(\"photoUpErr\");\n              });\n            }\n          } else {\n            self.$emit(\"photoUpFinish\", self.imgUrls);\n          }\n        })();\n      }\n    }\n  },\n  methods: {\n    fileClick: function fileClick() {\n      var imgSel = document.getElementById(\"upload_file_photo\");\n      console.log(imgSel);\n      var event = new MouseEvent(\"click\");\n      imgSel.dispatchEvent(event);\n    },\n    fileChange: function fileChange(el) {\n      var self = this;\n\n      for (var i = 0; i < el.target.files.length; i++) {\n        var file = el.target.files[i];\n        this.imgFiles.push(file);\n        var reader = new FileReader();\n        reader.readAsDataURL(file);\n\n        reader.onload = function () {\n          self.imgList.push(this.result);\n        };\n      }\n    },\n    fileDel: function fileDel(index) {\n      var self = this;\n      self.imgList.splice(index, 1);\n      self.imgFiles.splice(index, 1);\n    } //调用手机摄像头并拍照\n    // getImage() {\n    //   let self = this;\n    //   let cmr = plus.camera.getCamera();\n    //   cmr.captureImage(\n    //     function(p) {\n    //       plus.io.resolveLocalFileSystemURL(\n    //         p,\n    //         function(entry) {\n    //           console.log(entry.toLocalURL() + \" name=\" + entry.name);\n    //           self.imgList.push(entry.toLocalURL());\n    //         },\n    //         function(e) {\n    //           console.log(\"读取拍照文件错误\" + e.message);\n    //           plus.nativeUI.toast(\"读取拍照文件错误：\" + e.message);\n    //         }\n    //       );\n    //     },\n    //     function(e) {\n    //       console.log(\"拍照失败\" + e.message);\n    //     },\n    //     {\n    //       filter: \"image\"\n    //     }\n    //   );\n    // },\n    // //从相册选择照片\n    // galleryImgs() {\n    //   let self = this;\n    //   plus.gallery.pick(\n    //     function(event) {\n    //       console.log(\"选择照片成功\");\n    //       for (var i in event.files) {\n    //         console.log(event.files[i]);\n    //         self.imgList.push(event.files[i]);\n    //       }\n    //     },\n    //     function(error) {\n    //       console.log(\"选择图片失败\" + error.message);\n    //     },\n    //     {\n    //       filter: \"image\",\n    //       multiple: true,\n    //       system: true\n    //     }\n    //   );\n    // },\n    // //点击事件，弹出选择摄像头和相册的选项\n    // showActionSheet() {\n    //   let self = this;\n    //   let bts = [\n    //     {\n    //       title: \"拍照\"\n    //     },\n    //     {\n    //       title: \"从相册选择\"\n    //     }\n    //   ];\n    //   plus.nativeUI.actionSheet(\n    //     {\n    //       cancel: \"取消\",\n    //       buttons: bts\n    //     },\n    //     function(e) {\n    //       if (e.index == 1) {\n    //         self.getImage();\n    //       } else if (e.index == 2) {\n    //         self.galleryImgs();\n    //       }\n    //     }\n    //   );\n    // },\n\n  },\n  computed: {\n    showImg: function showImg() {\n      return this.imgList.length > 0;\n    }\n  }\n};",{"version":3,"sources":["AddPhoto.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"photoDiv border-bottom\">\n        <label class=\"photo-Tip\">催收图片：</label>\n        <div class=\"upload_warp\">\n            <div class=\"upload_warp_img\" v-show=\"showImg\">\n                <div class=\"upload_warp_img_div\"\n                     v-for=\"(item,index) in imgList\"\n                     :key=\"index\"\n                >\n                    <img src=\"~imgUrl/del.png\" class=\"upload_warp_img_div_del\" @click=\"fileDel(index)\">\n                    <img\n                            preview=\"1\"\n                            :src=item\n                            class=\"upload_warp_img_div_img\"\n                    />\n                </div>\n            </div>\n            <div class=\"photos\">\n                <img class=\"photo\" src=\"~imgUrl/add@2x.png\" @click.stop=\"fileClick()\" />\n                <input\n                        type=\"file\"\n                        multiple\n                        ref=\"uploadImage\"\n                        @change=\"fileChange($event)\"\n                        accept=\"image/*\"\n                        name=\"file\"\n                        style=\"display: none\"\n                        id=\"upload_file_photo\"\n                />\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: \"addPhoto\",\n  data() {\n    return {\n      imgList: [],\n      imgFiles: [],\n      imgUrls: [],\n      upErr: false\n    };\n  },\n  props: {\n    beginUp: Boolean,\n    caseSubId: String\n  },\n  watch: {\n    beginUp(newVal) {\n      if (newVal === true) {\n        //开始上传图片\n        let self = this;\n        self.upErr = false;\n        if (this.imgFiles.length > 0) {\n          console.log(\"开始上传图片\");\n          var succNum = 0;\n          for (let i = 0; i < self.imgFiles.length; i++) {\n            if (self.upErr) break;\n            let file = self.imgFiles[i];\n            let param = new FormData();\n            param.append(\"file\", file, file.name);\n            let config = { headers: { \"Content-Type\": \"multipart/form-data\" } };\n            let url =\n              \"api/ace-app/collectionPhoto/imageAdd?caseSubId=\" +\n              self.caseSubId;\n            self.$axios\n              .post(url, param, config)\n              .then(response => {\n                console.log(response);\n                let mydata = response.data;\n                if (mydata.message == \"上传成功\") {\n                  succNum++;\n                  //保存返回的URL\n                  let url = mydata.data;\n                  self.imgUrls.push(url);\n                  if (succNum == this.imgFiles.length) {\n                    //图片上传完\n                    self.$emit(\"photoUpFinish\", self.imgUrls);\n                  }\n                } else {\n                  self.upErr = true;\n                  self.$emit(\"photoUpErr\");\n                }\n              })\n              .catch(error => {\n                console.log(error);\n                self.upErr = true;\n                self.$emit(\"photoUpErr\");\n              });\n          }\n        } else {\n          self.$emit(\"photoUpFinish\", self.imgUrls);\n        }\n      }\n    }\n  },\n  methods: {\n    fileClick() {\n      let imgSel = document.getElementById(\"upload_file_photo\");\n      console.log(imgSel);\n      const event = new MouseEvent(\"click\");\n      imgSel.dispatchEvent(event);\n    },\n    fileChange(el) {\n      let self = this;\n      for (let i = 0; i < el.target.files.length; i++) {\n        let file = el.target.files[i];\n        this.imgFiles.push(file);\n        var reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = function() {\n          self.imgList.push(this.result);\n        };\n      }\n    },\n    fileDel(index) {\n      let self = this;\n      self.imgList.splice(index, 1);\n      self.imgFiles.splice(index, 1);\n    }\n\n    //调用手机摄像头并拍照\n    // getImage() {\n    //   let self = this;\n    //   let cmr = plus.camera.getCamera();\n    //   cmr.captureImage(\n    //     function(p) {\n    //       plus.io.resolveLocalFileSystemURL(\n    //         p,\n    //         function(entry) {\n    //           console.log(entry.toLocalURL() + \" name=\" + entry.name);\n    //           self.imgList.push(entry.toLocalURL());\n    //         },\n    //         function(e) {\n    //           console.log(\"读取拍照文件错误\" + e.message);\n    //           plus.nativeUI.toast(\"读取拍照文件错误：\" + e.message);\n    //         }\n    //       );\n    //     },\n    //     function(e) {\n    //       console.log(\"拍照失败\" + e.message);\n    //     },\n    //     {\n    //       filter: \"image\"\n    //     }\n    //   );\n    // },\n    // //从相册选择照片\n    // galleryImgs() {\n    //   let self = this;\n    //   plus.gallery.pick(\n    //     function(event) {\n    //       console.log(\"选择照片成功\");\n    //       for (var i in event.files) {\n    //         console.log(event.files[i]);\n    //         self.imgList.push(event.files[i]);\n    //       }\n    //     },\n    //     function(error) {\n    //       console.log(\"选择图片失败\" + error.message);\n    //     },\n    //     {\n    //       filter: \"image\",\n    //       multiple: true,\n    //       system: true\n    //     }\n    //   );\n    // },\n    // //点击事件，弹出选择摄像头和相册的选项\n    // showActionSheet() {\n    //   let self = this;\n    //   let bts = [\n    //     {\n    //       title: \"拍照\"\n    //     },\n    //     {\n    //       title: \"从相册选择\"\n    //     }\n    //   ];\n    //   plus.nativeUI.actionSheet(\n    //     {\n    //       cancel: \"取消\",\n    //       buttons: bts\n    //     },\n    //     function(e) {\n    //       if (e.index == 1) {\n    //         self.getImage();\n    //       } else if (e.index == 2) {\n    //         self.galleryImgs();\n    //       }\n    //     }\n    //   );\n    // },\n  },\n  computed: {\n    showImg() {\n      return this.imgList.length > 0;\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n    @import \"~styles/varibles.styl\"\n    .photoDiv\n        margin-top: .2rem\n        text-align: left\n        margin-left: .4rem\n        padding-bottom: .2rem\n        .photo-Tip\n            font-size: .28rem\n            color: $font-color\n            display: block\n            text-align: left\n        .upload_warp\n            overflow: hidden\n            .upload_warp_img\n                float: left\n                .upload_warp_img_div\n                    display: inline-block\n                    position: relative\n                    width: 1.44rem\n                    height: 1.44rem\n                    .upload_warp_img_div_del\n                        position: absolute\n                        left: 1.04rem\n                        width: .4rem\n                        height: .4rem\n                        z-index: 2\n                    .upload_warp_img_div_img\n                        position: absolute\n                        top: .2rem\n                        width: 1.24rem\n                        height: 1.24rem\n            .photos\n                .photo\n                    width: 1.24rem\n                    height: 1.24rem\n                    padding-top: .2rem\n                    padding-right: .4rem\n</style>\n"],"sourceRoot":"src/pages/addRmas/component"}]}