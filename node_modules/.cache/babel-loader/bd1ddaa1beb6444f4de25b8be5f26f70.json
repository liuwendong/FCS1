{"remainingRequest":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/caseDetail/component/RmasPhoto.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/caseDetail/component/RmasPhoto.vue","mtime":1542767983487},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js","mtime":1539243342312},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js","mtime":1539243342312},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport photoUrl from \"../../../../static/photo@2x.png\";\nimport { Decrypt, Encrypt } from \"../../../utils\";\nexport default {\n  name: \"RmasPhoto\",\n  data: function data() {\n    return {\n      urls: [],\n      photoUrl: photoUrl,\n      testUrl: \"\",\n      photoLocalUrls: [],\n      photoNum: 0\n    };\n  },\n  props: {\n    item: Object,\n    preview: String\n  },\n  beforeMount: function beforeMount() {\n    this.urls = this.item.photoList.split(\",\");\n\n    for (var i = 0; i < this.urls.length; i++) {\n      this.downloadPhoto(this.urls[i]);\n    }\n  },\n  methods: {\n    downloadPhoto: function downloadPhoto(photoUrl) {\n      var _this = this;\n\n      this.$emit(\"downloading\");\n      console.log(\"请求下载图片 图片路径URL=\" + photoUrl);\n      var param = {\n        url: photoUrl\n      };\n      var paramJson = JSON.stringify(param);\n      console.log(paramJson);\n      var encrypt = Encrypt(paramJson);\n      var self = this;\n      var url = \"/api/ace-app/fileDownload/download?\" + \"parm=\" + encodeURIComponent(encrypt);\n      console.log(\"下载路径 url=\" + url);\n      self.$axios({\n        method: \"GET\",\n        url: url,\n        responseType: \"arraybuffer\"\n      }).then(function (res) {\n        var blob = new Blob([res.data], {\n          type: \"application/vnd.openxmlformates-officedocument.spreadsheetml.sheet\"\n        });\n        var localUrl = URL.createObjectURL(blob);\n        console.log(\"图片下载后 本地路径 url=\" + localUrl);\n        self.photoLocalUrls.push(localUrl);\n        self.photoNum++;\n\n        if (self.photoNum == _this.urls.length) {\n          self.$emit(\"downloaded\");\n        }\n      }).catch(function (error) {\n        console.log(error);\n        self.$emit(\"downloadErr\", '图片下载失败');\n      });\n    }\n  }\n};",{"version":3,"sources":["RmasPhoto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAiBA,OAAA,QAAA,MAAA,iCAAA;AACA,SAAA,OAAA,EAAA,OAAA,QAAA,gBAAA;AACA,eAAA;AACA,QAAA,WADA;AAEA,MAFA,kBAEA;AACA,WAAA;AACA,YAAA,EADA;AAEA,gBAAA,QAFA;AAGA,eAAA,EAHA;AAIA,sBAAA,EAJA;AAKA,gBAAA;AALA,KAAA;AAOA,GAVA;AAWA,SAAA;AACA,UAAA,MADA;AAEA,aAAA;AAFA,GAXA;AAeA,aAfA,yBAeA;AACA,SAAA,IAAA,GAAA,KAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,GAAA,CAAA;;AACA,SAAA,IAAA,IAAA,CAAA,EAAA,IAAA,KAAA,IAAA,CAAA,MAAA,EAAA,GAAA,EAAA;AACA,WAAA,aAAA,CAAA,KAAA,IAAA,CAAA,CAAA,CAAA;AACA;AACA,GApBA;AAqBA,WAAA;AACA,iBADA,yBACA,QADA,EACA;AAAA;;AACA,WAAA,KAAA,CAAA,aAAA;AACA,cAAA,GAAA,CAAA,oBAAA,QAAA;AACA,UAAA,QAAA;AAAA,aAAA;AAAA,OAAA;AACA,UAAA,YAAA,KAAA,SAAA,CAAA,KAAA,CAAA;AACA,cAAA,GAAA,CAAA,SAAA;AACA,UAAA,UAAA,QAAA,SAAA,CAAA;AACA,UAAA,OAAA,IAAA;AACA,UAAA,MACA,wCACA,OADA,GAEA,mBAAA,OAAA,CAHA;AAIA,cAAA,GAAA,CAAA,cAAA,GAAA;AACA,WACA,MADA,CACA;AACA,gBAAA,KADA;AAEA,aAAA,GAFA;AAGA,sBAAA;AAHA,OADA,EAMA,IANA,CAMA,eAAA;AACA,YAAA,OAAA,IAAA,IAAA,CAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,gBACA;AAFA,SAAA,CAAA;AAIA,YAAA,WAAA,IAAA,eAAA,CAAA,IAAA,CAAA;AACA,gBAAA,GAAA,CAAA,oBAAA,QAAA;AACA,aAAA,cAAA,CAAA,IAAA,CAAA,QAAA;AACA,aAAA,QAAA;;AACA,YAAA,KAAA,QAAA,IAAA,MAAA,IAAA,CAAA,MAAA,EAAA;AACA,eAAA,KAAA,CAAA,YAAA;AACA;AACA,OAlBA,EAmBA,KAnBA,CAmBA,iBAAA;AACA,gBAAA,GAAA,CAAA,KAAA;AACA,aAAA,KAAA,CAAA,aAAA,EAAA,QAAA;AACA,OAtBA;AAuBA;AArCA;AArBA,CAAA","sourcesContent":["<template>\n    <div class=\"photoDiv\">\n        <label class=\"photo-Tip\">催收图片：</label>\n        <img :src=\"testUrl\"/>\n        <div class=\"photos\">\n            <img\n                    v-for=\"(oneItem,index) in photoLocalUrls\"\n                    :key=\"index\"\n                    preview=\"preview\"\n                    class=\"photo\"\n                    :src= oneItem\n            />\n        </div>\n    </div>\n</template>\n\n<script>\nimport photoUrl from \"../../../../static/photo@2x.png\";\nimport { Decrypt, Encrypt } from \"../../../utils\";\nexport default {\n  name: \"RmasPhoto\",\n  data() {\n    return {\n      urls: [],\n      photoUrl: photoUrl,\n      testUrl: \"\",\n      photoLocalUrls: [],\n      photoNum: 0\n    };\n  },\n  props: {\n    item: Object,\n      preview:String\n  },\n  beforeMount() {\n    this.urls = this.item.photoList.split(\",\");\n    for (let i = 0; i < this.urls.length; i++) {\n      this.downloadPhoto(this.urls[i]);\n    }\n  },\n  methods: {\n    downloadPhoto(photoUrl) {\n      this.$emit(\"downloading\");\n      console.log(\"请求下载图片 图片路径URL=\" + photoUrl);\n      let param = { url: photoUrl };\n      let paramJson = JSON.stringify(param);\n      console.log(paramJson);\n      let encrypt = Encrypt(paramJson);\n      let self = this;\n      let url =\n        \"/api/ace-app/fileDownload/download?\" +\n        \"parm=\" +\n        encodeURIComponent(encrypt);\n      console.log(\"下载路径 url=\" + url);\n      self\n        .$axios({\n          method: \"GET\",\n          url: url,\n          responseType: \"arraybuffer\"\n        })\n        .then(res => {\n          let blob = new Blob([res.data], {\n            type:\n              \"application/vnd.openxmlformates-officedocument.spreadsheetml.sheet\"\n          });\n          let localUrl = URL.createObjectURL(blob);\n          console.log(\"图片下载后 本地路径 url=\" + localUrl);\n          self.photoLocalUrls.push(localUrl);\n          self.photoNum++;\n          if (self.photoNum == this.urls.length) {\n            self.$emit(\"downloaded\");\n          }\n        })\n        .catch(error => {\n          console.log(error);\n          self.$emit(\"downloadErr\",'图片下载失败');\n        });\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n    @import \"~styles/varibles.styl\"\n    .photoDiv\n        margin-top: .2rem\n        text-align: left\n        margin-left: .4rem\n        .photo-Tip\n            font-size: .28rem\n            color: $font-color\n            display: block\n            text-align: left\n        .photos\n            .photo\n                width: 1.24rem\n                height: 1.24rem\n                padding-top: .2rem\n                padding-right: .4rem\n</style>\n"],"sourceRoot":"src/pages/caseDetail/component"}]}