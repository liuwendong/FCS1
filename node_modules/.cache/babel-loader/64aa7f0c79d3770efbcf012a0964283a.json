{"remainingRequest":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/addRmas/component/AddPhoto.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/addRmas/component/AddPhoto.vue","mtime":1541065743239},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js","mtime":1539243342312},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js","mtime":1539243342312},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _typeof from \"/Users/apple/Desktop/\\u534E\\u878D\\u50AC\\u6536APP\\u5F00\\u53D1/fcs/node_modules/@babel/runtime/helpers/builtin/es6/typeof\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"addPhoto\",\n  data: function data() {\n    return {\n      imgList: [],\n      datas: new FormData(),\n      files: 0,\n      size: 0\n    };\n  },\n  methods: {\n    //调用手机摄像头并拍照\n    getImage: function getImage() {\n      var self = this;\n      var cmr = plus.camera.getCamera();\n      cmr.captureImage(function (p) {\n        plus.io.resolveLocalFileSystemURL(p, function (entry) {\n          console.log(entry.toLocalURL() + \" name=\" + entry.name);\n          self.imgList.push(entry.toLocalURL());\n        }, function (e) {\n          console.log(\"读取拍照文件错误\" + e.message);\n          plus.nativeUI.toast(\"读取拍照文件错误：\" + e.message);\n        });\n      }, function (e) {\n        console.log(\"拍照失败\" + e.message);\n      }, {\n        filter: \"image\"\n      });\n    },\n    //从相册选择照片\n    galleryImgs: function galleryImgs() {\n      var self = this;\n      plus.gallery.pick(function (event) {\n        console.log(\"选择照片成功\");\n\n        for (var i in event.files) {\n          console.log(event.files[i]);\n          self.imgList.push(event.files[i]);\n        }\n      }, function (error) {\n        console.log(\"选择图片失败\" + error.message);\n      }, {\n        filter: \"image\",\n        multiple: true,\n        system: true\n      });\n    },\n    //点击事件，弹出选择摄像头和相册的选项\n    showActionSheet: function showActionSheet() {\n      var self = this;\n      var bts = [{\n        title: \"拍照\"\n      }, {\n        title: \"从相册选择\"\n      }];\n      plus.nativeUI.actionSheet({\n        cancel: \"取消\",\n        buttons: bts\n      }, function (e) {\n        if (e.index == 1) {\n          self.getImage();\n        } else if (e.index == 2) {\n          self.galleryImgs();\n        }\n      });\n    },\n    fileChange: function fileChange(el) {\n      this.files = document.getElementById(\"upload_file\").get(0).files;\n      console.log(this.files.length);\n\n      for (var i = 0; i < this.files.length; i++) {\n        this.datas.append(\"file\", this.files[i]);\n      }\n\n      this.show1 = false;\n      console.log(_typeof(this.files));\n      console.log(this.files);\n      if (!el.target.files[0].size) return;\n      this.fileList(el.target);\n      el.target.value = \"\";\n    },\n    fileList: function fileList(_fileList) {\n      var files = _fileList.files;\n\n      for (var i = 0; i < files.length; i++) {\n        //判断是否为文件夹\n        if (files[i].type != \"\") {\n          this.fileAdd(files[i]);\n        } else {\n          //文件夹处理\n          this.folders(_fileList.items[i]);\n        }\n      }\n    },\n    //文件夹处理\n    folders: function folders(files) {\n      var _this = this; //判断是否为原生file\n\n\n      if (files.kind) {\n        files = files.webkitGetAsEntry();\n      }\n\n      files.createReader().readEntries(function (file) {\n        for (var i = 0; i < file.length; i++) {\n          if (file[i].isFile) {\n            _this.foldersAdd(file[i]);\n          } else {\n            _this.folders(file[i]);\n          }\n        }\n      });\n    },\n    fileAdd: function fileAdd(file) {\n      //总大小\n      this.size = this.size + file.size; //判断是否为图片文件\n\n      if (file.type.indexOf(\"image\") == -1) {\n        file.src = \"wenjian.png\";\n        this.imgList.push({\n          file: file\n        });\n      } else {\n        var reader = new FileReader();\n        reader.vue = this;\n        reader.readAsDataURL(file);\n\n        reader.onload = function () {\n          file.src = this.result;\n          this.vue.imgList.push({\n            file: file\n          });\n        };\n      }\n    },\n    fileDel: function fileDel(index) {\n      var self = this;\n      self.imgList.splice(index, 1);\n    },\n    bytesToSize: function bytesToSize(bytes) {\n      if (bytes === 0) {\n        return \"0 B\";\n      }\n\n      var k = 1000,\n          // or 1024\n      sizes = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"],\n          i = Math.floor(Math.log(bytes) / Math.log(k));\n      return (bytes / Math.pow(k, i)).toPrecision(3) + \" \" + sizes[i];\n    },\n    dragenter: function dragenter(el) {\n      el.stopPropagation();\n      el.preventDefault();\n    },\n    dragover: function dragover(el) {\n      el.stopPropagation();\n      el.preventDefault();\n    },\n    drop: function drop(el) {\n      el.stopPropagation();\n      el.preventDefault();\n      this.fileList(el.dataTransfer);\n    },\n    shows: function shows(et, tx) {\n      this.strut = et;\n      this.txt = tx;\n    },\n    handleClick: function handleClick() {\n      this.$store.commit(\"add\");\n    }\n  },\n  computed: {\n    showImg: function showImg() {\n      return this.imgList.length > 0;\n    }\n  }\n};",{"version":3,"sources":["AddPhoto.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"photoDiv border-bottom\">\n        <input\n                type=\"file\"\n                ref=\"uploadImage\"\n                @change=\"fileChange($event)\"\n                accept=\"image/*\"\n                capture=\"camera\"\n                style=\"display: none\"\n                name=\"file\"\n                id=\"upload_file\"\n        />\n        <label class=\"photo-Tip\">催收图片：</label>\n        <div class=\"upload_warp\">\n            <div class=\"upload_warp_img\" v-show=\"showImg\">\n                <div class=\"upload_warp_img_div\"\n                     v-for=\"(item,index) in imgList\"\n                     :key=\"index\"\n                >\n                    <img src=\"~imgUrl/del.png\" class=\"upload_warp_img_div_del\" @click=\"fileDel(index)\">\n                    <img\n                            preview=\"1\"\n                            :src=item\n                            class=\"upload_warp_img_div_img\"\n                    />\n                </div>\n            </div>\n            <div class=\"photos\" @click.stop=\"showActionSheet()\">\n                <img class=\"photo\" src=\"~imgUrl/上传图片@2x.png\" />\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: \"addPhoto\",\n  data() {\n    return {\n      imgList: [],\n      datas: new FormData(),\n      files: 0,\n      size: 0\n    };\n  },\n  methods: {\n    //调用手机摄像头并拍照\n    getImage() {\n      let self = this;\n      let cmr = plus.camera.getCamera();\n      cmr.captureImage(\n        function(p) {\n          plus.io.resolveLocalFileSystemURL(\n            p,\n            function(entry) {\n              console.log(entry.toLocalURL() + \" name=\" + entry.name);\n              self.imgList.push(entry.toLocalURL());\n            },\n            function(e) {\n              console.log(\"读取拍照文件错误\" + e.message);\n              plus.nativeUI.toast(\"读取拍照文件错误：\" + e.message);\n            }\n          );\n        },\n        function(e) {\n          console.log(\"拍照失败\" + e.message);\n        },\n        {\n          filter: \"image\"\n        }\n      );\n    },\n    //从相册选择照片\n    galleryImgs() {\n      let self = this;\n      plus.gallery.pick(\n        function(event) {\n          console.log(\"选择照片成功\");\n          for (var i in event.files) {\n            console.log(event.files[i]);\n            self.imgList.push(event.files[i]);\n          }\n        },\n        function(error) {\n          console.log(\"选择图片失败\" + error.message);\n        },\n        {\n          filter: \"image\",\n          multiple: true,\n          system: true\n        }\n      );\n    },\n    //点击事件，弹出选择摄像头和相册的选项\n    showActionSheet() {\n      let self = this;\n      let bts = [\n        {\n          title: \"拍照\"\n        },\n        {\n          title: \"从相册选择\"\n        }\n      ];\n      plus.nativeUI.actionSheet(\n        {\n          cancel: \"取消\",\n          buttons: bts\n        },\n        function(e) {\n          if (e.index == 1) {\n            self.getImage();\n          } else if (e.index == 2) {\n            self.galleryImgs();\n          }\n        }\n      );\n    },\n    fileChange(el) {\n      this.files = document.getElementById(\"upload_file\").get(0).files;\n      console.log(this.files.length);\n      for (let i = 0; i < this.files.length; i++) {\n        this.datas.append(\"file\", this.files[i]);\n      }\n      this.show1 = false;\n      console.log(typeof this.files);\n      console.log(this.files);\n      if (!el.target.files[0].size) return;\n      this.fileList(el.target);\n      el.target.value = \"\";\n    },\n    fileList(fileList) {\n      let files = fileList.files;\n      for (let i = 0; i < files.length; i++) {\n        //判断是否为文件夹\n        if (files[i].type != \"\") {\n          this.fileAdd(files[i]);\n        } else {\n          //文件夹处理\n          this.folders(fileList.items[i]);\n        }\n      }\n    },\n    //文件夹处理\n    folders(files) {\n      let _this = this;\n      //判断是否为原生file\n      if (files.kind) {\n        files = files.webkitGetAsEntry();\n      }\n      files.createReader().readEntries(function(file) {\n        for (let i = 0; i < file.length; i++) {\n          if (file[i].isFile) {\n            _this.foldersAdd(file[i]);\n          } else {\n            _this.folders(file[i]);\n          }\n        }\n      });\n    },\n    fileAdd(file) {\n      //总大小\n      this.size = this.size + file.size;\n      //判断是否为图片文件\n      if (file.type.indexOf(\"image\") == -1) {\n        file.src = \"wenjian.png\";\n        this.imgList.push({\n          file\n        });\n      } else {\n        let reader = new FileReader();\n        reader.vue = this;\n        reader.readAsDataURL(file);\n        reader.onload = function() {\n          file.src = this.result;\n          this.vue.imgList.push({\n            file\n          });\n        };\n      }\n    },\n    fileDel(index) {\n      let self = this;\n      self.imgList.splice(index, 1);\n    },\n    bytesToSize(bytes) {\n      if (bytes === 0) {\n        return \"0 B\";\n      }\n      let k = 1000, // or 1024\n        sizes = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"],\n        i = Math.floor(Math.log(bytes) / Math.log(k));\n      return (bytes / Math.pow(k, i)).toPrecision(3) + \" \" + sizes[i];\n    },\n    dragenter(el) {\n      el.stopPropagation();\n      el.preventDefault();\n    },\n    dragover(el) {\n      el.stopPropagation();\n      el.preventDefault();\n    },\n    drop(el) {\n      el.stopPropagation();\n      el.preventDefault();\n      this.fileList(el.dataTransfer);\n    },\n    shows(et, tx) {\n      this.strut = et;\n      this.txt = tx;\n    },\n    handleClick() {\n      this.$store.commit(\"add\");\n    }\n  },\n  computed: {\n    showImg() {\n      return this.imgList.length > 0;\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n    @import \"~styles/varibles.styl\"\n    .photoDiv\n        margin-top: .2rem\n        text-align: left\n        margin-left: .4rem\n        padding-bottom: .2rem\n        .photo-Tip\n            font-size: .28rem\n            color: $font-color\n            display: block\n            text-align: left\n        .upload_warp\n            overflow: hidden\n            .upload_warp_img\n                float: left\n                .upload_warp_img_div\n                    display: inline-block\n                    position: relative\n                    width: 1.44rem\n                    height: 1.44rem\n                    .upload_warp_img_div_del\n                        position: absolute\n                        left: 1.04rem\n                        width: .4rem\n                        height: .4rem\n                        z-index: 2\n                    .upload_warp_img_div_img\n                        position: absolute\n                        top: .2rem\n                        width: 1.24rem\n                        height: 1.24rem\n            .photos\n                .photo\n                    width: 1.24rem\n                    height: 1.24rem\n                    padding-top: .2rem\n                    padding-right: .4rem\n</style>\n"],"sourceRoot":"src/pages/addRmas/component"}]}