{"remainingRequest":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/caseDetail/component/RmasAudio.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/src/pages/caseDetail/component/RmasAudio.vue","mtime":1542767737701},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js","mtime":1539243342312},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/cache-loader/dist/cjs.js","mtime":1539243342312},{"path":"/Users/apple/Desktop/华融催收APP开发/fcs/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Decrypt, Encrypt } from \"../../../utils\";\nimport photoUrl from \"../../../../static/xiazai.png\";\nexport default {\n  name: \"RmasAudio\",\n  data: function data() {\n    return {\n      urls: [],\n      audioNames: [],\n      audioLoaclUrls: [],\n      downloadBtn: photoUrl\n    };\n  },\n  props: {\n    item: Object\n  },\n  beforeMount: function beforeMount() {\n    if (this.item.audioList.length > 0) {\n      this.urls = this.item.audioList.split(\",\");\n      console.log(\"音频路径----- \" + this.urls);\n\n      for (var i = 0; i < this.urls.length; i++) {\n        var oneUrl = this.urls[i];\n        var names = oneUrl.split(\"/\");\n        var name = names[names.length - 1];\n        this.audioNames.push(name);\n      }\n    }\n  },\n  methods: {\n    downloadAudio: function downloadAudio(index) {\n      this.$emit(\"downloading\");\n      var videoUrl = this.urls[index];\n      var param = {\n        url: videoUrl\n      };\n      console.log(\"开始下载录音 url= \" + param);\n      var encrypt = Encrypt(JSON.stringify(param));\n      var self = this;\n      var url = \"api/ace-app/fileDownload/download?\" + \"parm=\" + encodeURIComponent(encrypt);\n      console.log(\"下载路径 url=\" + url);\n      self.$axios({\n        method: \"GET\",\n        url: url,\n        responseType: \"arraybuffer\"\n      }).then(function (res) {\n        var blob = new Blob([res.data], {\n          type: \"application/vnd.openxmlformates-officedocument.spreadsheetml.sheet\"\n        });\n        self.urls.splice(index, 1);\n        self.audioLoaclUrls.push(URL.createObjectURL(blob));\n        self.$emit(\"downloaded\");\n      }).catch(function (error) {\n        console.log(error);\n        self.$emit(\"downloadErr\", \"视频下载失败\");\n      });\n    }\n  }\n};",{"version":3,"sources":["RmasAudio.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA,SAAA,OAAA,EAAA,OAAA,QAAA,gBAAA;AACA,OAAA,QAAA,MAAA,+BAAA;AACA,eAAA;AACA,QAAA,WADA;AAEA,MAFA,kBAEA;AACA,WAAA;AACA,YAAA,EADA;AAEA,kBAAA,EAFA;AAGA,sBAAA,EAHA;AAIA,mBAAA;AAJA,KAAA;AAMA,GATA;AAUA,SAAA;AACA,UAAA;AADA,GAVA;AAaA,aAbA,yBAaA;AACA,QAAA,KAAA,IAAA,CAAA,SAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,WAAA,IAAA,GAAA,KAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA,cAAA,GAAA,CAAA,eAAA,KAAA,IAAA;;AACA,WAAA,IAAA,IAAA,CAAA,EAAA,IAAA,KAAA,IAAA,CAAA,MAAA,EAAA,GAAA,EAAA;AACA,YAAA,SAAA,KAAA,IAAA,CAAA,CAAA,CAAA;AACA,YAAA,QAAA,OAAA,KAAA,CAAA,GAAA,CAAA;AACA,YAAA,OAAA,MAAA,MAAA,MAAA,GAAA,CAAA,CAAA;AACA,aAAA,UAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA;AACA,GAxBA;AAyBA,WAAA;AACA,iBADA,yBACA,KADA,EACA;AACA,WAAA,KAAA,CAAA,aAAA;AACA,UAAA,WAAA,KAAA,IAAA,CAAA,KAAA,CAAA;AACA,UAAA,QAAA;AAAA,aAAA;AAAA,OAAA;AACA,cAAA,GAAA,CAAA,iBAAA,KAAA;AACA,UAAA,UAAA,QAAA,KAAA,SAAA,CAAA,KAAA,CAAA,CAAA;AACA,UAAA,OAAA,IAAA;AACA,UAAA,MACA,uCACA,OADA,GAEA,mBAAA,OAAA,CAHA;AAIA,cAAA,GAAA,CAAA,cAAA,GAAA;AACA,WACA,MADA,CACA;AACA,gBAAA,KADA;AAEA,aAAA,GAFA;AAGA,sBAAA;AAHA,OADA,EAMA,IANA,CAMA,eAAA;AACA,YAAA,OAAA,IAAA,IAAA,CAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,gBACA;AAFA,SAAA,CAAA;AAIA,aAAA,IAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,aAAA,cAAA,CAAA,IAAA,CAAA,IAAA,eAAA,CAAA,IAAA,CAAA;AACA,aAAA,KAAA,CAAA,YAAA;AACA,OAdA,EAeA,KAfA,CAeA,iBAAA;AACA,gBAAA,GAAA,CAAA,KAAA;AACA,aAAA,KAAA,CAAA,aAAA,EAAA,QAAA;AACA,OAlBA;AAmBA;AAhCA;AAzBA,CAAA","sourcesContent":["<template>\n    <div class=\"audioDiv\">\n        <label class=\"audio-Tip\">催收录音：</label>\n        <div class=\"audios\">\n            <div class=\"oneAudio\" v-for=\"(url,index) in audioLoaclUrls\" :key=\"index\">\n                <audio class=\"audio\"\n                       preload=\"auto\"\n                       controls=\"controls\"\n                       :src=url\n                ></audio>\n                <label class=\"name\">{{audioNames[index]}}</label>\n            </div>\n            <div class=\"oneAudio\" v-for=\"(url,index) in this.urls\" :key=\"index\">\n                <img class=\"img\" :src=\"downloadBtn\" @click=\"downloadAudio(index)\"/>\n                <label class=\"name\">点击下载</label>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { Decrypt, Encrypt } from \"../../../utils\";\nimport photoUrl from \"../../../../static/xiazai.png\";\nexport default {\n  name: \"RmasAudio\",\n  data() {\n    return {\n      urls: [],\n      audioNames: [],\n      audioLoaclUrls: [],\n      downloadBtn: photoUrl\n    };\n  },\n  props: {\n    item: Object\n  },\n  beforeMount() {\n    if (this.item.audioList.length > 0) {\n      this.urls = this.item.audioList.split(\",\");\n      console.log(\"音频路径----- \" + this.urls);\n      for (let i = 0; i < this.urls.length; i++) {\n        let oneUrl = this.urls[i];\n        let names = oneUrl.split(\"/\");\n        let name = names[names.length - 1];\n        this.audioNames.push(name);\n      }\n    }\n  },\n  methods: {\n    downloadAudio(index) {\n      this.$emit(\"downloading\");\n      let videoUrl = this.urls[index];\n      let param = { url: videoUrl };\n      console.log(\"开始下载录音 url= \" + param);\n      let encrypt = Encrypt(JSON.stringify(param));\n      let self = this;\n      let url =\n        \"api/ace-app/fileDownload/download?\" +\n        \"parm=\" +\n        encodeURIComponent(encrypt);\n      console.log(\"下载路径 url=\" + url);\n      self\n        .$axios({\n          method: \"GET\",\n          url: url,\n          responseType: \"arraybuffer\"\n        })\n        .then(res => {\n          let blob = new Blob([res.data], {\n            type:\n              \"application/vnd.openxmlformates-officedocument.spreadsheetml.sheet\"\n          });\n          self.urls.splice(index, 1);\n          self.audioLoaclUrls.push(URL.createObjectURL(blob));\n          self.$emit(\"downloaded\");\n        })\n        .catch(error => {\n          console.log(error);\n          self.$emit(\"downloadErr\", \"视频下载失败\");\n        });\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n    @import \"~styles/varibles.styl\"\n    .audioDiv\n        margin-top: .2rem\n        text-align: left\n        margin-left: .4rem\n        margin-bottom: -.2rem\n        .audio-Tip\n            font-size: .28rem\n            color: $font-color\n            display: block\n            text-align: left\n        .audios\n            overflow: hidden\n            .oneAudio\n                float: left\n                .img\n                    width: 1.24rem\n                    height: 1.24rem\n                    padding-top: .2rem\n                    padding-right: .4rem\n                    display: block\n                .audio\n                    width: 1.24rem\n                    height: 1.24rem\n                    padding-top: .2rem\n                    padding-right: .4rem\n                .name\n                    font-size: .05rem\n                    color: #666666\n                    display: block\n                    width: 1.24rem\n                    text-align: center\n                    margin-top: .1rem\n</style>\n"],"sourceRoot":"src/pages/caseDetail/component"}]}